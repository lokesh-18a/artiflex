<!-- C:\dev\artiflex\templates\artist\add_product_step2.html -->
{% extends "layouts/base.html" %}
{% block title %}Review & Finalize Product{% endblock %}
{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <h2>Review Your Product - Step 2/2</h2>
        <p class="text-muted">Our AI has generated a description and suggested a price. Review, edit if needed, and finalize your listing.</p>
        <hr class="mb-4">

        <div class="row g-5">
            <!-- Left Column: AI Content & Image -->
            <div class="col-md-7">
                <div class="mb-4">
                    <img src="{{ url_for('static', path='/uploads/' + product_data.image_filename) }}" class="img-fluid rounded shadow-sm" alt="Product Preview">
                </div>

                <div class="card bg-light mb-4">
                    <div class="card-header">
                        <strong>AI Pricing Suggestion</strong>
                    </div>
                    <div class="card-body">
                        <p class="card-text">{{ ai_price_suggestion }}</p>
                    </div>
                </div>
            </div>

            <!-- Right Column: Final Form -->
            <div class="col-md-5">
                <form action="/artist/manage/products/save" method="post">
                    <!-- Hidden fields to pass data from step 1 -->
                    <input type="hidden" name="name" value="{{ product_data.name }}">
                    <input type="hidden" name="category" value="{{ product_data.category }}">
                    <input type="hidden" name="artist_notes" value="{{ product_data.artist_notes }}">
                    <input type="hidden" name="image_filename" value="{{ product_data.image_filename }}">

                    <div class="mb-3">
                        <label for="ai_generated_description" class="form-label"><strong>AI-Generated Description</strong> (Editable)</label>
                        <textarea class="form-control" id="ai_generated_description" name="ai_generated_description" rows="12" required>{{ ai_description }}</textarea>
                    </div>

                    <div class="row">
                        <div class="col">
                            <div class="mb-3">
                                <label for="price_usd" class="form-label"><strong>Final Price (USD)</strong></label>
                                <div class="input-group">
                                    <span class="input-group-text">$</span>
                                    <input type="number" step="0.01" class="form-control" id="price_usd" name="price_usd" required>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="mb-3">
                                <label for="stock" class="form-label"><strong>Stock Quantity</strong></label>
                                <input type="number" class="form-control" id="stock" name="stock" value="1" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="d-grid">
                        <button type="submit" class="btn btn-success btn-lg">Publish Product</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}